<!DOCTYPE>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>MarkerClusterer v3 Example</title>

<style type="text/css">
body {
    margin: 0;
    padding: 10px 20px 20px;
    font-family: Arial;
    font-size: 16px;
}

#map-container {
    padding: 6px;
    border-width: 1px;
    border-style: solid;
    border-color: #ccc #ccc #999 #ccc;
    -webkit-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
    -moz-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
    box-shadow: rgba(64, 64, 64, 0.1) 0 2px 5px;
    width: 600px;
}

#map {
    width: 600px;
    height: 400px;
}

</style>

<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="js/markerclusterer.js"></script>
<script type="text/javascript" src="js/oms.js"></script>
<script type="text/javascript" src="js/realworld.50000.1.js"></script>

<script type="text/javascript">
function initialize() {
    var center = new google.maps.LatLng(-37.79, 175.27);

    var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 3,
                    center: center,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    maxZoom: 18
                });

    //var oms = new OverlappingMarkerSpiderfier(map, {markersWontMove: true, markersWontHide: true});

    window.map = map;
    var markers = [];
    for (var i = 0; i < addressPoints.length; i++) {
        var data= addressPoints[i];
        var latLng = new google.maps.LatLng(data[0],data[1]);
        var marker = new google.maps.Marker({
            position: latLng
        });
        markers.push(marker);
        //oms.addMarker(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers, {
            //The grid size of a cluster in pixels. The grid is a square. The default value is 60.
            gridSize: 90,
            //The maximum zoom level at which clustering is enabled or null if clustering is to be enabled at all zoom levels. The default value is null.
            maxZoom: 18
    });

    //cuando ejecute el ultimo zoom y existan markers muy cercanos unos a otros
   // google.maps.event.addListener(markerCluster,'clusterclickLastZoom', function(e){
    //    console.log('clusterclickLastZoom', e);
   // });
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
<h3>A simple example of MarkerClusterer (100 markers)</h3>
<p>
<a href="?compiled">Compiled</a> |
<a href="?">Standard</a> version of the script.
</p>
<div id="map-container"><div id="map"></div></div>
</body>
</html>
